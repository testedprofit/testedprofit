<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profitnet | Utility Hub</title>
    <meta name="description" content="Essential Algorand tools: Wallet Cleaner, MultiSender, Risk Radar, and ProfitLaunch Crowdfunding.">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Algorand SDK -->
    <script src="https://cdn.jsdelivr.net/npm/algosdk@2.9.0/dist/browser/algosdk.min.js"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['"Plus Jakarta Sans"', 'sans-serif'],
                    },
                    colors: {
                        slate: {
                            850: '#151F32',
                            900: '#0F172A',
                        }
                    },
                    animation: {
                        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                    }
                }
            }
        }
    </script>

    <style>
        body { background-color: #F8FAFC; }
        .nav-item-active {
            background: #0F172A;
            color: white;
            box-shadow: 0 4px 12px rgba(15, 23, 42, 0.15);
        }
        .premium-gradient {
            background: linear-gradient(135deg, #6366f1 0%, #a855f7 100%);
        }
        .fade-in { animation: fadeIn 0.4s cubic-bezier(0.16, 1, 0.3, 1); }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(8px); } to { opacity: 1; transform: translateY(0); } }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #CBD5E1; border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: #94A3B8; }
    </style>
</head>
<body class="text-slate-800 h-screen overflow-hidden antialiased">

    <div id="root" class="w-full h-full"></div>

    <!-- Pera Wallet Connect Module -->
    <script type="module">
        import { PeraWalletConnect } from "https://esm.sh/@perawallet/connect@1.4.2?bundle";
        window.PeraWalletConnect = PeraWalletConnect;
        window.dispatchEvent(new Event('pera-loaded'));
    </script>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- Configuration ---
        const CHAIN_ID = 416001;
        const NODE_API = "https://mainnet-api.algonode.cloud";
        const NFD_API = "https://api.nf.domains/nfd";
        const PREMIUM_RECIPIENT = "cheetos.algo"; 
        const PREMIUM_COST = 1000000;

        // --- Utils ---
        const resolveNFD = async (name) => {
            try {
                const res = await fetch(`${NFD_API}/${name}?view=brief`);
                if (!res.ok) return null;
                return await res.json();
            } catch (e) { return null; }
        };

        const isValidAddress = (addr) => {
            try { return algosdk.isValidAddress(addr); } catch (e) { return false; }
        };

        // --- Icons ---
        const Icons = {
            Trash: ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/></svg>,
            Shield: ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>,
            Send: ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon></svg>,
            Lock: ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path></svg>,
            Search: ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>,
            Rocket: ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z"/><path d="m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z"/><path d="M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0"/><path d="M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5"/></svg>,
            Spinner: ({ className }) => <svg className={`${className} animate-spin`} xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4"></circle><path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>,
            Check: ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polyline points="20 6 9 17 4 12"></polyline></svg>,
            Box: ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/><polyline points="3.27 6.96 12 12.01 20.73 6.96"/><line x1="12" y1="22.08" x2="12" y2="12"/></svg>
        };

        // --- Common Components ---
        const Card = ({ children, className = "" }) => (
            <div className={`bg-white rounded-2xl border border-slate-200 shadow-sm p-8 ${className}`}>
                {children}
            </div>
        );

        const Button = ({ children, onClick, disabled, variant = "primary", className = "" }) => {
            const base = "px-5 py-2.5 rounded-lg font-semibold transition-all duration-200 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 text-sm";
            const variants = {
                primary: "bg-slate-900 text-white hover:bg-slate-800 shadow-lg shadow-slate-900/10",
                secondary: "bg-white text-slate-700 border border-slate-200 hover:bg-slate-50",
                danger: "bg-red-50 text-red-600 hover:bg-red-100",
                premium: "premium-gradient text-white shadow-lg shadow-indigo-500/20 hover:shadow-indigo-500/30",
                launch: "bg-indigo-600 text-white hover:bg-indigo-700 shadow-lg shadow-indigo-600/20"
            };
            return (
                <button onClick={onClick} disabled={disabled} className={`${base} ${variants[variant]} ${className}`}>
                    {children}
                </button>
            );
        };

        const Input = ({ ...props }) => (
            <input 
                {...props} 
                className="w-full bg-slate-50 border border-slate-200 rounded-lg px-4 py-3 outline-none focus:ring-2 focus:ring-indigo-500/10 focus:border-indigo-500 transition-all font-medium text-slate-700 placeholder-slate-400 text-sm"
            />
        );

        const StatusBadge = ({ type, msg }) => {
            if (!msg) return null;
            const colors = {
                error: "bg-red-50 text-red-600 border-red-100",
                success: "bg-emerald-50 text-emerald-600 border-emerald-100",
                info: "bg-blue-50 text-blue-600 border-blue-100"
            };
            return (
                <div className={`fade-in px-4 py-3 rounded-xl border text-sm font-medium flex items-center gap-2 ${colors[type] || colors.info}`}>
                    {type === 'success' && <Icons.Check className="w-4 h-4" />}
                    {msg}
                </div>
            );
        };

        // --- Tools ---

        const AlgoSweep = ({ account, peraWallet }) => {
            const [assets, setAssets] = useState([]);
            const [selectedAssets, setSelectedAssets] = useState(new Set());
            const [loading, setLoading] = useState(false);
            const [status, setStatus] = useState({ type: '', msg: '' });

            useEffect(() => { if (account) fetchDust(); }, [account]);

            const fetchDust = async () => {
                setLoading(true);
                try {
                    const client = new algosdk.Algodv2('', NODE_API, '');
                    const info = await client.accountInformation(account).do();
                    const dust = (info.assets || []).filter(a => a.amount === 0).map(a => ({ id: a['asset-id'], amount: 0 }));
                    setAssets(dust);
                } catch (e) { setStatus({ type: 'error', msg: 'Failed to scan wallet.' }); }
                setLoading(false);
            };

            const toggleSelectAll = () => {
                setSelectedAssets(selectedAssets.size > 0 ? new Set() : new Set(assets.slice(0, 16).map(a => a.id)));
            };

            const sweep = async () => {
                setLoading(true);
                setStatus({ type: 'info', msg: 'Please sign in wallet...' });
                try {
                    const client = new algosdk.Algodv2('', NODE_API, '');
                    const params = await client.getTransactionParams().do();
                    const txns = [];
                    selectedAssets.forEach(id => {
                        txns.push(algosdk.makeAssetTransferTxnWithSuggestedParamsFromObject({
                            from: account, to: account, closeRemainderTo: account, amount: 0, assetIndex: id, suggestedParams: params, note: new TextEncoder().encode("Profitnet: Sweep")
                        }));
                    });
                    
                    if (txns.length === 0) return;

                    algosdk.assignGroupID(txns);
                    const group = txns.map(t => ({ txn: t, signers: [account] }));
                    const signed = await peraWallet.signTransaction([group]); 
                    const { txId } = await client.sendRawTransaction(signed).do();
                    await algosdk.waitForConfirmation(client, txId, 4);
                    setStatus({ type: 'success', msg: `Swept ${selectedAssets.size} assets!` });
                    setAssets(p => p.filter(a => !selectedAssets.has(a.id)));
                    setSelectedAssets(new Set());
                } catch (e) { 
                    setStatus({ type: 'error', msg: 'Transaction failed.' }); 
                }
                setLoading(false);
            };

            if (!account) return <div className="text-center py-20 text-slate-400">Connect wallet to scan.</div>;

            return (
                <div className="fade-in">
                    <div className="flex justify-between items-end mb-6">
                        <div>
                            <h2 className="text-2xl font-bold tracking-tight mb-1">Wallet Cleaner</h2>
                            <p className="text-slate-500 text-sm">Recover storage fees by opting out of empty assets.</p>
                        </div>
                        <div className="text-right">
                             <div className="text-2xl font-bold text-slate-900">{(assets.length * 0.1).toFixed(1)} A</div>
                             <span className="text-xs font-bold uppercase tracking-wider text-slate-400">Recoverable</span>
                        </div>
                    </div>

                    <Card className="!p-0 overflow-hidden mb-6">
                        <div className="bg-slate-50 px-6 py-3 border-b border-slate-100 flex justify-between items-center">
                            <label className="flex items-center gap-3 cursor-pointer">
                                <input type="checkbox" onChange={toggleSelectAll} checked={selectedAssets.size > 0} disabled={!assets.length} className="rounded text-slate-900 focus:ring-0 w-4 h-4" />
                                <span className="text-xs font-bold text-slate-500 uppercase">Select Batch (Max 16)</span>
                            </label>
                            <span className="text-xs font-bold text-slate-400">{assets.length} Found</span>
                        </div>
                        <div className="max-h-[300px] overflow-y-auto">
                            {!loading && assets.length === 0 ? <div className="p-12 text-center text-slate-400">No dust found. ✨</div> :
                            assets.map(a => (
                                <label key={a.id} className="flex items-center justify-between px-6 py-4 hover:bg-slate-50 border-b border-slate-100 last:border-0 cursor-pointer transition-colors">
                                    <div className="flex items-center gap-4">
                                        <input type="checkbox" checked={selectedAssets.has(a.id)} onChange={() => {
                                            const s = new Set(selectedAssets);
                                            s.has(a.id) ? s.delete(a.id) : (s.size < 16 && s.add(a.id));
                                            setSelectedAssets(s);
                                        }} className="rounded text-slate-900 focus:ring-0 w-4 h-4" />
                                        <span className="font-mono text-sm text-slate-600">{a.id}</span>
                                    </div>
                                    <div className="text-xs font-medium text-amber-600 bg-amber-50 px-2 py-1 rounded">0.1A Locked</div>
                                </label>
                            ))}
                        </div>
                    </Card>

                    <div className="flex flex-col gap-4">
                        <StatusBadge {...status} />
                        <Button onClick={sweep} disabled={!selectedAssets.size || loading} className="w-full">
                            {loading ? <Icons.Spinner className="w-5 h-5" /> : <Icons.Trash className="w-5 h-5" />}
                            Sweep Assets
                        </Button>
                    </div>
                </div>
            );
        };

        const MultiSender = ({ account, peraWallet, unlocked, setUnlocked }) => {
            const [text, setText] = useState('');
            const [status, setStatus] = useState({});
            const [processing, setProcessing] = useState(false);
            const [feeAddr, setFeeAddr] = useState(null);

            useEffect(() => { resolveNFD(PREMIUM_RECIPIENT).then(d => d && setFeeAddr(d.depositAccount)); }, []);

            const unlock = async () => {
                if (!account) return;
                setProcessing(true);
                try {
                    const client = new algosdk.Algodv2('', NODE_API, '');
                    const params = await client.getTransactionParams().do();
                    const txn = algosdk.makePaymentTxnWithSuggestedParamsFromObject({
                        from: account, to: feeAddr, amount: PREMIUM_COST, suggestedParams: params, note: new TextEncoder().encode("Profitnet: Unlock")
                    });
                    const signed = await peraWallet.signTransaction([[{ txn, signers: [account] }]]);
                    const { txId } = await client.sendRawTransaction(signed).do();
                    await algosdk.waitForConfirmation(client, txId, 4);
                    setUnlocked(true);
                } catch (e) { setStatus({ type: 'error', msg: 'Unlock failed.' }); }
                setProcessing(false);
            };

            const send = async () => {
                setProcessing(true);
                try {
                    const client = new algosdk.Algodv2('', NODE_API, '');
                    const params = await client.getTransactionParams().do();
                    const txns = [];
                    text.trim().split('\n').forEach(line => {
                        const [addr, amt] = line.split(',').map(s => s.trim());
                        if (isValidAddress(addr)) {
                            txns.push(algosdk.makePaymentTxnWithSuggestedParamsFromObject({
                                from: account, to: addr, amount: Math.floor(parseFloat(amt)*1000000), suggestedParams: params, note: new TextEncoder().encode("Profitnet MultiSender")
                            }));
                        }
                    });
                    if (txns.length > 16) throw new Error('Max 16 txns');
                    algosdk.assignGroupID(txns);
                    const group = txns.map(t => ({ txn: t, signers: [account] }));
                    const signed = await peraWallet.signTransaction([group]);
                    const { txId } = await client.sendRawTransaction(signed).do();
                    await algosdk.waitForConfirmation(client, txId, 4);
                    setStatus({ type: 'success', msg: `Sent ${txns.length} payments!` });
                    setText('');
                } catch (e) { setStatus({ type: 'error', msg: e.message || 'Failed' }); }
                setProcessing(false);
            };

            if (!unlocked) return (
                <Card className="text-center py-16 relative overflow-hidden border-indigo-100">
                    <div className="absolute top-0 left-0 w-full h-1 premium-gradient"></div>
                    <div className="w-16 h-16 bg-indigo-50 rounded-2xl flex items-center justify-center mx-auto mb-6 text-indigo-500"><Icons.Lock className="w-8 h-8"/></div>
                    <h2 className="text-2xl font-bold mb-2">Premium Feature</h2>
                    <p className="text-slate-500 mb-8 max-w-md mx-auto">Unlock MultiSender to batch transactions. Perfect for payroll and distributions.</p>
                    <Button onClick={unlock} disabled={processing || !feeAddr} variant="premium" className="w-full max-w-xs mx-auto">
                        {processing ? <Icons.Spinner className="w-5 h-5" /> : "Unlock for 1 ALGO"}
                    </Button>
                </Card>
            );

            return (
                <div className="fade-in">
                    <h2 className="text-2xl font-bold mb-6">MultiSender</h2>
                    <Card className="mb-6">
                        <textarea 
                            value={text} onChange={e => setText(e.target.value)}
                            placeholder="Address, Amount&#10;MO2...X2I, 5&#10;K3L...J9A, 10.5"
                            className="w-full h-48 bg-slate-50 rounded-xl p-4 font-mono text-sm border-none focus:ring-2 focus:ring-indigo-200 resize-none"
                        ></textarea>
                    </Card>
                    <div className="flex flex-col gap-4">
                        <StatusBadge {...status} />
                        <Button onClick={send} disabled={processing || !text} variant="premium" className="w-full">
                            {processing ? <Icons.Spinner className="w-5 h-5"/> : "Send Batch"}
                        </Button>
                    </div>
                </div>
            );
        };

        const ProfitLaunch = ({ account, peraWallet }) => {
            const [projects, setProjects] = useState([
                { id: 1, title: "AlgoDeFi Yield Aggregator", description: "Automated yield farming strategies with low slippage.", goal: 50000, raised: 32000, category: "DeFi", backers: 142 },
                { id: 2, title: "PixelWars: On-Chain MMO", description: "A decentralized strategy game where land is stored as NFTs.", goal: 120000, raised: 4500, category: "Gaming", backers: 28 },
                { id: 3, title: "Community Validator Node", description: "Crowdsourced infrastructure to secure the network.", goal: 20000, raised: 18500, category: "Infra", backers: 89 },
            ]);
            const [view, setView] = useState('list'); // 'list' | 'create'
            const [formData, setFormData] = useState({ title: '', description: '', goal: '', category: 'Tech' });
            const [status, setStatus] = useState({});
            const [loading, setLoading] = useState(false);

            const handleBack = async (project) => {
                if (!account) { setStatus({ type: 'error', msg: 'Connect wallet to back.' }); return; }
                const amount = prompt(`Amount (ALGO) to back "${project.title}"`, "100");
                if (!amount || isNaN(amount) || amount <= 0) return;

                setLoading(true);
                try {
                    // Simulation
                    await new Promise(r => setTimeout(r, 1000));
                    setProjects(prev => prev.map(p => p.id === project.id ? { ...p, raised: p.raised + parseFloat(amount), backers: p.backers + 1 } : p));
                    setStatus({ type: 'success', msg: `Backed ${project.title}!` });
                } catch (e) { setStatus({ type: 'error', msg: 'Failed.' }); }
                setLoading(false);
            };

            const handleCreate = async () => {
                if (!account) { setStatus({ type: 'error', msg: 'Connect wallet required.' }); return; }
                if (!formData.title || !formData.goal) return;

                setLoading(true);
                await new Promise(r => setTimeout(r, 1000));
                setProjects([{ id: Date.now(), ...formData, goal: parseFloat(formData.goal), raised: 0, backers: 0 }, ...projects]);
                setView('list');
                setLoading(false);
            };

            const CategoryTag = ({ cat }) => {
                const map = {
                    'DeFi': 'bg-purple-50 text-purple-700 border-purple-100',
                    'Gaming': 'bg-pink-50 text-pink-700 border-pink-100',
                    'Infra': 'bg-blue-50 text-blue-700 border-blue-100',
                    'Tech': 'bg-slate-50 text-slate-700 border-slate-100'
                };
                return <span className={`px-2 py-1 rounded-md text-[10px] uppercase font-bold tracking-wide border ${map[cat] || map['Tech']}`}>{cat}</span>;
            };

            return (
                <div className="fade-in max-w-5xl mx-auto">
                    <div className="flex justify-between items-end mb-8">
                        <div>
                            <div className="flex items-center gap-2 mb-1">
                                <h2 className="text-2xl font-bold tracking-tight text-slate-900">ProfitLaunch</h2>
                                <span className="bg-indigo-100 text-indigo-700 text-[10px] font-bold px-2 py-0.5 rounded-full uppercase">Beta</span>
                            </div>
                            <p className="text-slate-500 text-sm">Decentralized crowdfunding. Launch your vision on Algorand.</p>
                        </div>
                        {view === 'list' ? (
                            <Button onClick={() => setView('create')} variant="launch">+ Create Project</Button>
                        ) : (
                            <Button onClick={() => setView('list')} variant="secondary">Cancel</Button>
                        )}
                    </div>

                    <StatusBadge {...status} />

                    {view === 'create' ? (
                        <Card className="max-w-xl mx-auto mt-6">
                            <h3 className="text-xl font-bold mb-6">Launch Campaign</h3>
                            <div className="space-y-4">
                                <div>
                                    <label className="text-xs font-bold text-slate-500 uppercase block mb-2">Project Title</label>
                                    <Input placeholder="e.g. Next Gen DEX" value={formData.title} onChange={e => setFormData({...formData, title: e.target.value})} />
                                </div>
                                <div className="grid grid-cols-2 gap-4">
                                     <div>
                                        <label className="text-xs font-bold text-slate-500 uppercase block mb-2">Goal (ALGO)</label>
                                        <Input type="number" placeholder="10000" value={formData.goal} onChange={e => setFormData({...formData, goal: e.target.value})} />
                                    </div>
                                    <div>
                                        <label className="text-xs font-bold text-slate-500 uppercase block mb-2">Category</label>
                                        <select className="w-full bg-slate-50 border border-slate-200 rounded-lg px-4 py-3 outline-none text-sm font-medium" 
                                            value={formData.category} onChange={e => setFormData({...formData, category: e.target.value})}>
                                            <option>DeFi</option><option>Gaming</option><option>NFT</option><option>Infra</option><option>Community</option>
                                        </select>
                                    </div>
                                </div>
                                <div>
                                    <label className="text-xs font-bold text-slate-500 uppercase block mb-2">Pitch</label>
                                    <textarea className="w-full bg-slate-50 border border-slate-200 rounded-lg px-4 py-3 outline-none min-h-[120px] text-sm"
                                        placeholder="Describe your project..." value={formData.description} onChange={e => setFormData({...formData, description: e.target.value})}></textarea>
                                </div>
                                <Button onClick={handleCreate} disabled={loading} variant="launch" className="w-full mt-4">
                                    {loading ? <Icons.Spinner className="w-5 h-5"/> : "Publish Campaign"}
                                </Button>
                            </div>
                        </Card>
                    ) : (
                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-6">
                            {projects.map(p => {
                                const pct = Math.min((p.raised / p.goal) * 100, 100);
                                return (
                                    <Card key={p.id} className="!p-6 flex flex-col h-full hover:shadow-lg transition-all duration-300 group">
                                        <div className="flex justify-between items-start mb-4">
                                            <CategoryTag cat={p.category} />
                                            <div className="flex items-center gap-1 text-slate-400 text-xs">
                                                <Icons.Box className="w-3 h-3" /> 
                                                <span>{p.backers} Backers</span>
                                            </div>
                                        </div>
                                        <h3 className="text-lg font-bold text-slate-900 mb-2 group-hover:text-indigo-600 transition-colors">{p.title}</h3>
                                        <p className="text-slate-500 text-sm mb-6 flex-1 line-clamp-3">{p.description}</p>
                                        
                                        <div className="space-y-4">
                                            <div className="space-y-2">
                                                <div className="flex justify-between text-xs font-bold">
                                                    <span className="text-slate-900">{p.raised.toLocaleString()} A <span className="text-slate-400 font-normal">raised</span></span>
                                                    <span className="text-indigo-600">{pct.toFixed(0)}%</span>
                                                </div>
                                                <div className="w-full bg-slate-100 rounded-full h-2 overflow-hidden">
                                                    <div className="bg-indigo-600 h-full rounded-full transition-all duration-500" style={{ width: `${pct}%` }}></div>
                                                </div>
                                            </div>
                                            <Button onClick={() => handleBack(p)} variant="secondary" className="w-full text-xs !py-2">
                                                Back Project
                                            </Button>
                                        </div>
                                    </Card>
                                );
                            })}
                        </div>
                    )}
                </div>
            );
        };

        const App = () => {
            const [tab, setTab] = useState('sweep');
            const [pera, setPera] = useState(null);
            const [acct, setAcct] = useState(null);
            const [unlocked, setUnlocked] = useState(false);

            useEffect(() => {
                const init = () => {
                    if (window.PeraWalletConnect && !pera) {
                        const p = new window.PeraWalletConnect({ chainId: CHAIN_ID });
                        setPera(p);
                        p.reconnectSession().then(a => a.length && setAcct(a[0]));
                    }
                };
                window.PeraWalletConnect ? init() : window.addEventListener('pera-loaded', init);
            }, []);

            const connect = () => pera?.connect().then(a => setAcct(a[0]));
            const disconnect = () => { pera?.disconnect(); setAcct(null); };

            const NavItem = ({ id, label, icon: Icon, premium }) => (
                <button 
                    onClick={() => setTab(id)}
                    className={`w-full flex items-center gap-3 px-4 py-2.5 rounded-lg transition-all duration-200 mb-1 font-medium text-sm
                    ${tab === id ? 'nav-item-active' : 'text-slate-500 hover:bg-slate-100 hover:text-slate-900'}`}
                >
                    <Icon className={`w-4 h-4 ${tab === id ? 'text-white' : 'text-slate-400'}`} />
                    <span>{label}</span>
                    {premium && <span className="ml-auto text-[10px] font-bold bg-indigo-50 text-indigo-600 px-1.5 py-0.5 rounded uppercase">Pro</span>}
                </button>
            );

            return (
                <div className="flex w-full h-full">
                    <div className="w-64 bg-white border-r border-slate-200 flex flex-col p-4 z-20">
                        <div className="px-4 py-4 mb-6">
                            <h1 className="text-lg font-bold text-slate-900 tracking-tight flex items-center gap-2">
                                <div className="w-8 h-8 bg-slate-900 rounded-lg flex items-center justify-center text-white"><Icons.Rocket className="w-5 h-5" /></div>
                                Profitnet
                            </h1>
                        </div>

                        <div className="space-y-8 flex-1 overflow-y-auto px-2">
                            <div>
                                <div className="text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-2 px-4">Management</div>
                                <NavItem id="sweep" label="Cleaner" icon={Icons.Trash} />
                                <NavItem id="multi" label="MultiSender" icon={Icons.Send} premium />
                            </div>
                            <div>
                                <div className="text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-2 px-4">Discover</div>
                                <NavItem id="launch" label="ProfitLaunch" icon={Icons.Rocket} />
                                <NavItem id="nfd" label="NFD Scout" icon={Icons.Search} />
                                <NavItem id="risk" label="Risk Radar" icon={Icons.Shield} />
                            </div>
                        </div>

                        <div className="mt-4 pt-4 border-t border-slate-100">
                            {acct ? (
                                <div className="bg-slate-50 border border-slate-100 p-3 rounded-xl">
                                    <div className="flex items-center gap-2 mb-2">
                                        <div className="w-2 h-2 rounded-full bg-emerald-500"></div>
                                        <span className="text-xs font-bold text-slate-700">Connected</span>
                                    </div>
                                    <div className="font-mono text-[10px] text-slate-400 truncate mb-2">{acct}</div>
                                    <button onClick={disconnect} className="w-full text-xs font-semibold text-slate-600 hover:text-slate-900">Sign Out</button>
                                </div>
                            ) : (
                                <Button onClick={connect} className="w-full">Connect Wallet</Button>
                            )}
                        </div>
                    </div>

                    <div className="flex-1 relative bg-[#F8FAFC] overflow-hidden">
                        <div className="h-full overflow-y-auto p-12 relative z-10">
                            <div className="max-w-4xl mx-auto">
                                {tab === 'sweep' && <AlgoSweep account={acct} peraWallet={pera} />}
                                {tab === 'multi' && <MultiSender account={acct} peraWallet={pera} unlocked={unlocked} setUnlocked={setUnlocked} />}
                                {tab === 'launch' && <ProfitLaunch account={acct} peraWallet={pera} />}
                                {tab === 'risk' && <div><h2 className="text-2xl font-bold mb-6">Risk Radar</h2><p className="text-slate-500">Coming soon in v3.4</p></div>}
                                {tab === 'nfd' && <div><h2 className="text-2xl font-bold mb-6">NFD Scout</h2><p className="text-slate-500">Coming soon in v3.4</p></div>}
                            </div>
                            <div className="mt-12 text-center text-slate-400 text-xs font-medium">
                                Profitnet Utility Hub • v3.3
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
