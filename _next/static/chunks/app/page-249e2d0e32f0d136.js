(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{6601:function(){},7451:function(){},7787:function(e,t,r){Promise.resolve().then(r.bind(r,3692))},3692:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return f}});var n=(0,r(4660).Ue)((function(e){return{isConnected:!1,address:null,connect:function(t){return e({isConnected:!0,address:t})},disconnect:function(){return e({isConnected:!1,address:null})}}})),s=r(9891),a=r(4001),o=r.n(a),i=r(2265),c=new(r(20).D),l=r(7437);function d(){var e=(0,i.useState)(!1),t=e[0],r=e[1],a=n(),d=a.connect,u=a.disconnect,m=a.address;(0,i.useEffect)((function(){return c.reconnectSession().then((function(e){var t;e.length&&(d(e[0]),null===(t=c.connector)||void 0===t||t.on("disconnect",(function(){u()})))})).catch((function(e){return console.error("Pera reconnect error:",e)})),function(){c.connector&&c.connector.off("disconnect")}}),[d,u]);var x=function(){var e=(0,s.Z)(o().mark((function e(){var t,n,s,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(!0),e.prev=1,e.next=4,c.connect();case 4:(t=e.sent).length>0&&(d(t[0]),null===(n=c.connector)||void 0===n||n.on("disconnect",(function(){u()}))),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),"CONNECT_MODAL_CLOSED"!==(null===(a=e.t0)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.type)&&(console.error("Wallet connection error:",e.t0),alert("Failed to connect wallet. Please try again."));case 12:return e.prev=12,r(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,8,12,15]])})));return function(){return e.apply(this,arguments)}}();return m?(0,l.jsx)("button",{onClick:function(){c.disconnect(),u()},className:"w-full bg-red-600 hover:bg-red-700 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-200 transform hover:scale-105 shadow-lg",children:"Disconnect Wallet"}):(0,l.jsx)("button",{onClick:x,disabled:t,className:"w-full bg-gradient-to-r from-yellow-500 to-yellow-400 hover:from-yellow-600 hover:to-yellow-500 text-black font-bold py-3 px-6 rounded-lg transition-all duration-200 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg flex items-center justify-center gap-2",children:t?"Connecting...":(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-6 h-6",children:(0,l.jsx)("path",{d:"M4 14H20C20.55 14 21 13.55 21 13V6C21 5.45 20.55 5 20 5H4C3.45 5 3 5.45 3 6V13C3 13.55 3.45 14 4 14ZM4 7H20V12H4V7ZM3 16H21V18H3V16Z"})}),"Connect Pera Wallet"]})})}function u(){var e=(0,i.useState)([]),t=e[0],r=e[1],n=(0,i.useState)(!0),a=n[0],c=n[1];return(0,i.useEffect)((function(){var e=function(){var e=(0,s.Z)(o().mark((function e(){var t,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://localhost:8000/api/posts");case 3:if((t=e.sent).ok){e.next=6;break}throw new Error("Failed to fetch posts");case 6:return e.next=8,t.json();case 8:n=e.sent,r(n),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.error("Error fetching posts:",e.t0);case 15:return e.prev=15,c(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[0,12,15,18]])})));return function(){return e.apply(this,arguments)}}();e()}),[]),a?(0,l.jsxs)("div",{className:"text-center py-8",children:[(0,l.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"}),(0,l.jsx)("p",{className:"mt-2 text-gray-500 dark:text-gray-400",children:"Loading posts..."})]}):0===t.length?(0,l.jsx)("div",{className:"text-center py-12",children:(0,l.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"No posts yet. Be the first to post!"})}):(0,l.jsx)("div",{className:"space-y-4",children:t.map((function(e){return(0,l.jsx)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-xl p-6 hover:shadow-md transition-shadow",children:(0,l.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,l.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-400 to-primary-600 rounded-full flex items-center justify-center text-white font-bold",children:e.creator.slice(0,2).toUpperCase()}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,l.jsxs)("span",{className:"font-semibold text-gray-900 dark:text-white",children:[e.creator.slice(0,6),"...",e.creator.slice(-4)]}),(0,l.jsx)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:new Date(1e3*e.timestamp).toLocaleString()})]}),(0,l.jsx)("p",{className:"text-gray-800 dark:text-gray-200 mb-4",children:e.content_cid}),(0,l.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,l.jsxs)("button",{className:"flex items-center space-x-2 text-gray-600 dark:text-gray-400 hover:text-primary-600 dark:hover:text-primary-400 transition-colors",children:[(0,l.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),(0,l.jsx)("span",{children:e.likes})]}),(0,l.jsxs)("button",{className:"flex items-center space-x-2 text-gray-600 dark:text-gray-400 hover:text-primary-600 dark:hover:text-primary-400 transition-colors",children:[(0,l.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),(0,l.jsx)("span",{children:e.comments})]})]})]})]})},e.id)}))})}var m=r(2229),x=JSON.parse('{"name":"SocialPlatform","methods":[{"name":"register_user","args":[{"type":"string","name":"username"},{"type":"string","name":"bio"}],"returns":{"type":"bool"},"desc":"Register a new user on the platform"},{"name":"create_post","args":[{"type":"string","name":"content_cid"},{"type":"uint8","name":"post_type"}],"returns":{"type":"uint64"},"desc":"Create a new post. Returns a post ID (transaction ID will be used)"},{"name":"like_post","args":[{"type":"address","name":"post_creator"},{"type":"string","name":"post_tx_id"}],"returns":{"type":"bool"},"desc":"Like a post. The actual like tracking happens off-chain via indexer"},{"name":"follow_user","args":[{"type":"address","name":"user_to_follow"}],"returns":{"type":"bool"},"desc":"Follow another user"},{"name":"unfollow_user","args":[{"type":"address","name":"user_to_unfollow"}],"returns":{"type":"bool"},"desc":"Unfollow a user"},{"name":"tip_user","args":[{"type":"address","name":"recipient"},{"type":"uint64","name":"amount"}],"returns":{"type":"bool"},"desc":"Send a tip (ALGO) to another user"},{"name":"get_user_profile","args":[{"type":"address","name":"user"}],"returns":{"type":"(string,string,uint64)"},"desc":"Get a user\'s profile information"},{"name":"get_user_stats","args":[{"type":"address","name":"user"}],"returns":{"type":"(uint64,uint64)"},"desc":"Get user statistics (followers, following)"}],"networks":{}}');function p(){var e=(0,i.useState)(""),t=e[0],r=e[1],a=(0,i.useState)(!1),d=a[0],u=a[1],p=n().address,h=function(){var e=(0,s.Z)(o().mark((function e(n){var a,i,l,d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),t.trim()&&p){e.next=3;break}return e.abrupt("return");case 3:return u(!0),e.prev=4,"","https://mainnet-api.algonode.cloud",443,a=new m.ZPm.Algodv2("","https://mainnet-api.algonode.cloud",443),e.next=11,a.getTransactionParams().do();case 11:return i=e.sent,l=new m.ZPm.ABIContract(x),(d=new m.ZPm.AtomicTransactionComposer).addMethodCall({appID:0,method:l.getMethodByName("create_post"),methodArgs:[t,0],sender:p,signer:function(){var e=(0,s.Z)(o().mark((function e(t){var r,n,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c.isConnected){e.next=6;break}return r=t.map((function(e){return{txn:e,signers:[p]}})),e.next=4,c.signTransaction([r]);case 4:return n=e.sent,e.abrupt("return",n);case 6:if(!window.myalgo){e.next=11;break}return e.next=9,window.myalgo.signTransaction(t.map((function(e){return e.toByte()})));case 9:return s=e.sent,e.abrupt("return",s.map((function(e){return e.blob})));case 11:throw new Error("No wallet connected");case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),suggestedParams:i,onComplete:m.ZPm.OnApplicationComplete.NoOpOC}),e.next=17,d.execute(a,4);case 17:alert("Post created on MainNet!"),r(""),e.next=25;break;case 21:e.prev=21,e.t0=e.catch(4),console.error("Error creating post:",e.t0),alert("Error: Smart Contract not deployed. (APP_ID is 0). Please deploy the contract first.");case 25:return e.prev=25,u(!1),e.finish(25);case 28:case"end":return e.stop()}}),e,null,[[4,21,25,28]])})));return function(t){return e.apply(this,arguments)}}();return(0,l.jsxs)("form",{onSubmit:h,className:"space-y-4",children:[(0,l.jsx)("textarea",{value:t,onChange:function(e){return r(e.target.value)},placeholder:"What's on your mind?",className:"w-full p-4 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent resize-none dark:bg-gray-700 dark:text-white",rows:4,maxLength:280}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[t.length,"/280"]}),(0,l.jsx)("button",{type:"submit",disabled:!t.trim()||d,className:"px-6 py-2 bg-primary-600 hover:bg-primary-700 text-white font-semibold rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Posting...":"Post"})]})]})}function h(){var e=n(),t=e.isConnected,r=e.address,s=e.disconnect;return(0,l.jsx)("header",{className:"bg-white dark:bg-gray-800 shadow-md",children:(0,l.jsxs)("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("h1",{className:"text-2xl font-bold bg-gradient-to-r from-primary-600 to-primary-400 bg-clip-text text-transparent",children:"Social Platform"}),(0,l.jsx)("span",{className:"text-xs bg-primary-100 text-primary-700 px-2 py-1 rounded-full",children:"Web3"})]}),(0,l.jsx)("div",{className:"flex items-center space-x-4",children:t?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:[null===r||void 0===r?void 0:r.slice(0,8),"...",null===r||void 0===r?void 0:r.slice(-6)]}),(0,l.jsx)("button",{onClick:s,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors",children:"Disconnect"})]}):(0,l.jsx)(d,{})})]})})}function f(){var e=n(),t=e.isConnected,r=e.address;return(0,l.jsxs)("main",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800",children:[(0,l.jsx)(h,{}),(0,l.jsx)("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:t?(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold",children:"Create Post"}),(0,l.jsxs)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[null===r||void 0===r?void 0:r.slice(0,6),"...",null===r||void 0===r?void 0:r.slice(-4)]})]}),(0,l.jsx)(p,{})]}),(0,l.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Feed"}),(0,l.jsx)(u,{})]})]}):(0,l.jsx)("div",{className:"flex flex-col items-center justify-center min-h-[60vh]",children:(0,l.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-8 w-full max-w-md",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold text-center mb-4 bg-gradient-to-r from-primary-600 to-primary-400 bg-clip-text text-transparent",children:"Welcome to Social Platform"}),(0,l.jsx)("p",{className:"text-gray-600 dark:text-gray-300 text-center mb-8",children:"Connect your wallet to start sharing and discovering content on Algorand"}),(0,l.jsx)(d,{})]})})})]})}}},function(e){e.O(0,[672,210,9,971,584,744],(function(){return t=7787,e(e.s=t);var t}));var t=e.O();_N_E=t}]);